<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <%= link_to 'Social Networking', root_path, class: "navbar-brand", id: "logo" %>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span> 
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <%= link_to 'About',about_path,class:"nav-link" %>
      </li>
      
      <% if !user_signed_in? %>
        <li class="nav-item">
          <%= link_to 'Sign Up',new_user_registration_path,class:"nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to 'Sign In',new_user_session_path,class:"nav-link" %>
        </li>
      <% end %> 
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Post
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <%= link_to 'All Posts', posts_path,class:"dropdown-item" %>
          <% if user_signed_in? %>
            <%= link_to 'Create new Post', new_post_path,class:"dropdown-item" %>
          <% end %>  
      </li>
      <% if user_signed_in? %>
        <li class="nav-item">
           <%= link_to 'Users', users_path, class:"nav-link" %>
        </li>
        <li class="nav-item">
          <form class="form-inline my-2 my-lg-0" method="GET" action="/search">
            <input class="form-control mr-sm-2" type="search" placeholder="search any user" aria-label="Search" name="query">
            <button class="btn btn-info my-2 my-sm-0" type="submit">Search</button>
          </form>
        </li>  

        <li class="nav-item">
            <%= link_to 'Friend Requests '+(current_user.friends.count).to_s,friends_path, class:"nav-link" %>
        </li>
      <% end %>
    </ul>

    <% if user_signed_in? %>
    <div class="nav-item dropdown my-2 my-lg-0">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= current_user.email.split("@")[0].upcase %>
        </a>
        <div class="dropdown-menu my-2 my-lg-0" aria-labelledby="navbarDropdown">
          <%= link_to 'Edit Profile',edit_user_registration_path,class:"dropdown-item" %>
          <%= link_to 'Friends '+(current_user.companions.count).to_s, companions_path, class:"dropdown-item" %> 
          <%= link_to 'Sign Out',destroy_user_session_path,method: :delete,class:"dropdown-item" %>
      </div>
    <% end %>  
    
  </div>
</nav>